# SIC-06-抗性系统 (Resistance System) v0.2

> **定位**：L2 真相字段（长期抗性，允许正负）
> **职责**：提供统一的“抵抗/脆弱度”输入，让战斗/事件/侵蚀系统/堕落系统/欲望系统读取做倍率、阈值、命中检定。
> **边界**：抗性系统本身不负责推进“侵蚀度/堕落值”，它只提供参数；推进由对应系统完成。

------

## 1) 抗性列表（8类，均可正可负）

- `miasma`（瘴气抗性：抵抗瘴气环境带来的**侵蚀度增长**、战斗劣化等）
- `restraint`（拘束抗性：抵抗束缚/捆绑/无法行动等控制）
- `shame`（羞耻抗性：抵抗暴露/不体面引发的心理冲击与社交惩罚倾向；与衣物/暴露摘要相关）
- `hypnosis`（催眠抗性：抵抗催眠类状态）
- `curse`（诅咒抗性：抵抗诅咒类持续负面；优先影响**侵蚀度/身体负面**的结算）
- `pleasure`（快感抗性：影响**欲望值上升速度**；越低越容易涨）
- `heat`（发情抗性：影响**高潮/失控阈值**；越低阈值越容易被压低）
- `trap`（陷阱抗性：抵抗陷阱触发/控制/伤害）

> **数值口径建议**：范围 `-100..+100`，默认 0（正=更抗，负=更脆弱）。具体换算公式放 L1 配置。

------

## 2) 触发点（When）

- **L4（主要）**：战斗/事件/陷阱结算时产生 `ResistanceDelta`（长期变化）并写回 L2
- **L3（可选）**：跨日 `DayChanged` 时，如果你允许“长期暴露在瘴气区会慢慢适应”，可对 `miasma` 做微小变化（可先不做）

------

## 3) 读取字段（Read Set）

- `player.resistance.*`（八类抗性真相：系统核心输入）
- `world.location_id`（当前位置：用于读取 L1 地图环境标签，如瘴气强度、陷阱密度）
- `world.day / world.time_slot / world.minute_of_day`（时间锚点：用于按日/按时段/按分钟的判定）
- `player.body.erosion`（侵蚀度：供侵蚀系统结算时参考抗性）
- `player.body.corruption`（堕落值：供堕落系统/衣物限制/心理门槛参考抗性）
- `wardrobe`（穿着实例：羞耻相关判定通常读取“破损/污渍/锁定”等真相；暴露度建议走 Digest 派生）

------

## 4) 写入字段（Write Set）

- `player.resistance.*`（八类抗性：长期成长/永久损伤）
- （可选）`player.resistance_meta.*`（例如最近变化回合：不必须）

------

## 5) 与其它系统的对接约定（Contract）

- **侵蚀系统（Erosion System）读取**：`miasma`, `curse`（修正侵蚀增长倍率、瘴气/诅咒影响强度）
- **堕落系统（Corruption System）读取**：`shame`（影响羞耻冲击）、（可选）`hypnosis/curse`（如果你设定它们也会动摇性观念）
- **欲望系统（Lust System）读取**：`pleasure`, `heat`（修正欲望上升速度与高潮/失控阈值）
- **战斗/事件系统读取**：`restraint/hypnosis/curse/trap/miasma`（异常命中/持续/减益幅度）
- **衣柜系统读取**：`shame` +（可选）`corruption` 阶段/数值（作为穿戴门槛）